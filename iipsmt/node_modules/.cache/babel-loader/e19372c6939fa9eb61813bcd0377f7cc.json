{"ast":null,"code":"import { useRef, useEffect } from 'react';\nimport { getGraphSize, processMinimap } from '../graph/utils';\nimport { isObject, isString } from '@antv/util';\nexport default function useInit(graphInstance, config, container) {\n  var graphHook = useRef();\n  var data = config.data,\n      nodeStyle = config.nodeStyle,\n      nodeAnchorPoints = config.nodeAnchorPoints,\n      nodeType = config.nodeType,\n      edgeType = config.edgeType,\n      edgeStyle = config.edgeStyle,\n      width = config.width,\n      height = config.height,\n      layout = config.layout,\n      minimapCfg = config.minimapCfg,\n      behaviors = config.behaviors,\n      nodeLabelCfg = config.nodeLabelCfg,\n      edgeLabelCfg = config.edgeLabelCfg,\n      _a = config.autoFit,\n      autoFit = _a === void 0 ? true : _a;\n  var minimap;\n  useEffect(function () {\n    if (graphInstance && !graphInstance.destroyed) {\n      graphInstance.changeData(data);\n      autoFit ? graphInstance.fitView() : graphInstance.fitCenter();\n    }\n  }, [data]);\n  useEffect(function () {\n    if (graphInstance && !graphInstance.destroyed) {\n      graphInstance.getNodes().forEach(function (node) {\n        graphInstance.updateItem(node, {\n          type: nodeType,\n          style: nodeStyle,\n          anchorPoints: nodeAnchorPoints,\n          labelCfg: nodeLabelCfg\n        });\n      });\n    }\n  }, [nodeStyle, nodeAnchorPoints, nodeType]);\n  useEffect(function () {\n    if (graphInstance && !graphInstance.destroyed) {\n      graphInstance.getEdges().forEach(function (edge) {\n        graphInstance.updateItem(edge, {\n          type: edgeType,\n          style: edgeStyle,\n          labelCfg: edgeLabelCfg\n        });\n      });\n    }\n  }, [edgeStyle, edgeType]);\n  useEffect(function () {\n    if (graphInstance && !graphInstance.destroyed) {\n      var graphSize = getGraphSize(width, height, container);\n      graphInstance.changeSize(graphSize[0], graphSize[1]);\n    }\n  }, [container, width, height]);\n  useEffect(function () {\n    if (graphInstance && !graphInstance.destroyed) {\n      graphInstance.updateLayout(layout);\n    }\n  }, [layout]);\n  useEffect(function () {\n    if (!minimapCfg || !graphInstance || graphInstance.destroyed) {\n      return;\n    }\n\n    if (minimapCfg.show) {\n      minimap = processMinimap(minimapCfg, graphInstance);\n      minimap === null || minimap === void 0 ? void 0 : minimap.updateCanvas();\n    } else {\n      var pluginMinimap = graphInstance.get('plugins')[0];\n\n      if (pluginMinimap) {\n        graphInstance.removePlugin(pluginMinimap);\n      }\n    }\n  }, [minimapCfg]);\n  useEffect(function () {\n    if (graphInstance && !graphInstance.destroyed) {\n      var defaultMode = graphInstance.get('modes').default;\n      var removingBehaviors_1 = [];\n      defaultMode.forEach(function (be) {\n        if (isObject(be)) {\n          removingBehaviors_1.push(be.type);\n        } else if (isString(be)) {\n          removingBehaviors_1.push(be);\n        }\n      });\n      graphInstance.removeBehaviors(removingBehaviors_1, 'default');\n      graphInstance.addBehaviors(behaviors, 'default');\n    }\n  }, [behaviors]);\n  useEffect(function () {\n    graphHook.current = graphInstance;\n    return function () {\n      if (graphInstance && !graphInstance.destroyed) {\n        graphInstance.destroy();\n        graphInstance = undefined;\n      }\n    };\n  }, []);\n  return {\n    graphHook: graphHook\n  };\n}","map":{"version":3,"sources":["D:/Project/React/iipsmt/node_modules/@ant-design/charts/es/hooks/useGraph.js"],"names":["useRef","useEffect","getGraphSize","processMinimap","isObject","isString","useInit","graphInstance","config","container","graphHook","data","nodeStyle","nodeAnchorPoints","nodeType","edgeType","edgeStyle","width","height","layout","minimapCfg","behaviors","nodeLabelCfg","edgeLabelCfg","_a","autoFit","minimap","destroyed","changeData","fitView","fitCenter","getNodes","forEach","node","updateItem","type","style","anchorPoints","labelCfg","getEdges","edge","graphSize","changeSize","updateLayout","show","updateCanvas","pluginMinimap","get","removePlugin","defaultMode","default","removingBehaviors_1","be","push","removeBehaviors","addBehaviors","current","destroy","undefined"],"mappings":"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","sourcesContent":["import { useRef, useEffect } from 'react';\nimport { getGraphSize, processMinimap } from '../graph/utils';\nimport { isObject, isString } from '@antv/util';\nexport default function useInit(graphInstance, config, container) {\n    var graphHook = useRef();\n    var data = config.data, nodeStyle = config.nodeStyle, nodeAnchorPoints = config.nodeAnchorPoints, nodeType = config.nodeType, edgeType = config.edgeType, edgeStyle = config.edgeStyle, width = config.width, height = config.height, layout = config.layout, minimapCfg = config.minimapCfg, behaviors = config.behaviors, nodeLabelCfg = config.nodeLabelCfg, edgeLabelCfg = config.edgeLabelCfg, _a = config.autoFit, autoFit = _a === void 0 ? true : _a;\n    var minimap;\n    useEffect(function () {\n        if (graphInstance && !graphInstance.destroyed) {\n            graphInstance.changeData(data);\n            autoFit ? graphInstance.fitView() : graphInstance.fitCenter();\n        }\n    }, [data]);\n    useEffect(function () {\n        if (graphInstance && !graphInstance.destroyed) {\n            graphInstance.getNodes().forEach(function (node) {\n                graphInstance.updateItem(node, {\n                    type: nodeType,\n                    style: nodeStyle,\n                    anchorPoints: nodeAnchorPoints,\n                    labelCfg: nodeLabelCfg,\n                });\n            });\n        }\n    }, [nodeStyle, nodeAnchorPoints, nodeType]);\n    useEffect(function () {\n        if (graphInstance && !graphInstance.destroyed) {\n            graphInstance.getEdges().forEach(function (edge) {\n                graphInstance.updateItem(edge, {\n                    type: edgeType,\n                    style: edgeStyle,\n                    labelCfg: edgeLabelCfg,\n                });\n            });\n        }\n    }, [edgeStyle, edgeType]);\n    useEffect(function () {\n        if (graphInstance && !graphInstance.destroyed) {\n            var graphSize = getGraphSize(width, height, container);\n            graphInstance.changeSize(graphSize[0], graphSize[1]);\n        }\n    }, [container, width, height]);\n    useEffect(function () {\n        if (graphInstance && !graphInstance.destroyed) {\n            graphInstance.updateLayout(layout);\n        }\n    }, [layout]);\n    useEffect(function () {\n        if (!minimapCfg || !graphInstance || graphInstance.destroyed) {\n            return;\n        }\n        if (minimapCfg.show) {\n            minimap = processMinimap(minimapCfg, graphInstance);\n            minimap === null || minimap === void 0 ? void 0 : minimap.updateCanvas();\n        }\n        else {\n            var pluginMinimap = graphInstance.get('plugins')[0];\n            if (pluginMinimap) {\n                graphInstance.removePlugin(pluginMinimap);\n            }\n        }\n    }, [minimapCfg]);\n    useEffect(function () {\n        if (graphInstance && !graphInstance.destroyed) {\n            var defaultMode = graphInstance.get('modes').default;\n            var removingBehaviors_1 = [];\n            defaultMode.forEach(function (be) {\n                if (isObject(be)) {\n                    removingBehaviors_1.push(be.type);\n                }\n                else if (isString(be)) {\n                    removingBehaviors_1.push(be);\n                }\n            });\n            graphInstance.removeBehaviors(removingBehaviors_1, 'default');\n            graphInstance.addBehaviors(behaviors, 'default');\n        }\n    }, [behaviors]);\n    useEffect(function () {\n        graphHook.current = graphInstance;\n        return function () {\n            if (graphInstance && !graphInstance.destroyed) {\n                graphInstance.destroy();\n                graphInstance = undefined;\n            }\n        };\n    }, []);\n    return {\n        graphHook: graphHook,\n    };\n}\n"]},"metadata":{},"sourceType":"module"}