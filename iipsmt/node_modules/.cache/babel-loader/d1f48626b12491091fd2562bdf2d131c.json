{"ast":null,"code":"var _jsxFileName = \"D:\\\\Project\\\\React\\\\iipsmt\\\\src\\\\pages\\\\UploadTest\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport MainSheet from './index.module.css';\nimport icon_file from '../../static/icons/icon_file.png';\nimport icon_train from '../../static/icons/icon_train.png';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class UploadTest extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleTrainClick = () => {\n      // this.props.history.push('/test_result')\n      console.log(this.resultFile);\n      let form = new FormData();\n      form.append('file', this.resultFile);\n      form.append('chunk', '0');\n      axios.post('/test', {\n        form: form\n      }, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(res => {\n        console.log('res.data');\n      });\n    };\n\n    this.handleFileUpload = e => {\n      console.log(123);\n      var self = this;\n      var resultFile = e.target.files[0];\n      this.resultFile = e.target.files[0];\n\n      if (resultFile) {\n        var reader = new FileReader();\n        reader.readAsText(resultFile, 'UTF-8');\n\n        reader.onload = function () {\n          self.setState({\n            content: this.result,\n            fileName: e.target.value\n          });\n        };\n      }\n    };\n\n    this.state = {\n      fileName: '未上传'\n    };\n    this.resultFile = '';\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: [MainSheet.pagePadding, 'zoomIn'].join(' '),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: MainSheet.pageContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: MainSheet.fileUploadModule,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: MainSheet.filePath,\n            children: this.state.fileName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"file\",\n            className: MainSheet.fileUploadLable,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: MainSheet.btnIcon,\n              src: icon_file,\n              alt: \"file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 24,\n              columnNumber: 29\n            }, this), \"\\u9009\\u62E9\\u6D4B\\u8BD5\\u96C6\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 23,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: MainSheet.modelTraining,\n            onClick: () => this.handleTrainClick(),\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              className: MainSheet.btnIcon,\n              src: icon_train,\n              alt: \"train\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 27,\n              columnNumber: 109\n            }, this), \"\\u8BAD\\u7EC3\\u6A21\\u578B\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"file\",\n            className: MainSheet.fileUpload,\n            type: \"file\",\n            onChange: e => this.handleFileUpload(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 28,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: MainSheet.fileOverview,\n          children: this.state.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/Project/React/iipsmt/src/pages/UploadTest/index.jsx"],"names":["React","Component","MainSheet","icon_file","icon_train","axios","UploadTest","constructor","props","handleTrainClick","console","log","resultFile","form","FormData","append","post","headers","then","res","handleFileUpload","e","self","target","files","reader","FileReader","readAsText","onload","setState","content","result","fileName","value","state","render","pagePadding","join","pageContainer","fileUploadModule","filePath","fileUploadLable","btnIcon","modelTraining","fileUpload","fileOverview"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport MainSheet from './index.module.css'\r\n\r\nimport icon_file from '../../static/icons/icon_file.png'\r\nimport icon_train from '../../static/icons/icon_train.png'\r\nimport axios from 'axios'\r\n\r\nexport default class UploadTest extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            fileName: '未上传',\r\n        }\r\n        this.resultFile = '';\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={[MainSheet.pagePadding, 'zoomIn'].join(' ')}>\r\n                <div className={MainSheet.pageContainer}>\r\n                    <div className={MainSheet.fileUploadModule}>\r\n                        <div className={MainSheet.filePath}>{this.state.fileName}</div>\r\n                        <label htmlFor=\"file\" className={MainSheet.fileUploadLable}>\r\n                            <img className={MainSheet.btnIcon} src={icon_file} alt=\"file\" />\r\n                            选择测试集\r\n                        </label>\r\n                        <button className={MainSheet.modelTraining} onClick={() => this.handleTrainClick()}><img className={MainSheet.btnIcon} src={icon_train} alt=\"train\" />训练模型</button>\r\n                        <input id='file' className={MainSheet.fileUpload} type=\"file\" onChange={(e) => this.handleFileUpload(e)} />\r\n                    </div>\r\n                    <span className={MainSheet.fileOverview}>{this.state.content}</span>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleTrainClick = () => {\r\n        // this.props.history.push('/test_result')\r\n        console.log(this.resultFile);\r\n        let form = new FormData();\r\n        form.append('file',this.resultFile);\r\n        form.append('chunk','0');\r\n        axios.post('/test',\r\n            {form:form},\r\n            {\r\n                headers: { \"Content-Type\": \"multipart/form-data\" }\r\n            }).then(res => {\r\n                console.log('res.data');\r\n            })\r\n    }\r\n\r\n    handleFileUpload = (e) => {\r\n        console.log(123);\r\n        var self = this;\r\n        var resultFile = e.target.files[0];\r\n        this.resultFile = e.target.files[0];\r\n        if (resultFile) {\r\n            var reader = new FileReader();\r\n            reader.readAsText(resultFile, 'UTF-8');\r\n            reader.onload = function () {\r\n                self.setState({\r\n                    content: this.result,\r\n                    fileName: e.target.value\r\n                })\r\n            };\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}